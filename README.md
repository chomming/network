## OSI 7 Layer
- 네트워크에서 통신이 일어나는 과정
- 1계층 : 물리층
  - 데이터를 전기적인 신호로 변환해서 주고받는 기능
  - 리피터, 허브, 케이블
- 2계층 : 데이터링크층
  - 정보의 오류와 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 도와주는 역할
  - 스위치, bridge
  - 전송 단위 : 프레임
  - 프로토콜 : 이더넷
  - MAC 주소로 통신
- 3계층 : 네트워크층
  - 경로 선택, 주소 지정
  - 경로에 따라 패킷 전달
  - 라우터, L3 스위치
  - 전송단위 : 패킷
  - 프로토콜 : IP, ICMP, ARP, IGMP
    - IP
      - 문제점
        - 데이터그램 전달 서비스 제공
        - 최선의 노력 전달 서비스
        - 오류 제어 및 지원 매커니즘 없음
        - 호스트 및 관리 질의를 위한 매커니즘 없음
    - ICMP
      - 메시지 유형
        - 오류 보고 메시지
          - 종류
            - 목적지 도달 불가능 : 데이터그램 전달 불가능
            - 시간 경과 : 데이터그램 수명 필드 0
            - 재지정 : 네트워크 상황에 따라 라우팅 테이블 변동
            - 발신지 억제 : 혼잡으로 인한 데이터 폐기
            - 매개변수 문제 : 라우터/목적지 호스트의 데이터그램 필드에 빠진 값 발견
          - 특징
            - 수정과 다름
            - 언제나 최초의 발신지에 전송
            - 오류 메시지를 전달하는 데이터그램에 대해 ICMP 오류 메시지 생성 X
            - 멀티캐스트 주소를 가진 데이터그램에 대해 ICMP 오류 메시지 생성 X
            - 특별한 주소를 가진 데이그램에 대해 ICMP 오류 메시지 생성 X
        - 질의 메시지
          - Time Stamp 요청, 응답 : 왕복 시간 결정
          - Echo 요청, 응답 : 고장 진단
- 4계층 : 전송층
  - 포트를 열어 응용 프로그램 전송
  - gateway
  - 특징
    - 프로세스 - 프로세스 통신
    - 포트 번호 사용
    - 흐름 제어
  - 전송 단위 : 세그먼트(TCP), 데이터그램(UDP)
  - 프로토콜 : TCP, UDP
    - UDP
      - User Data Procotol
      - 8바이트 헤더 : 최소한의 오버헤드
      - 잘 알려진 포트
        - 7 : Echo
        - 20, 21 : FTP
        - 23 : Telnet
        - 25 : SMTP
        - 53 : DNS
        - 80 : HTTP
      - 특징
        - 비연결형 서비스
        - 65,607보다 작은 메시지만 전송 가능
        - 흐름 제어, 오류 제어, 혼잡 제어 없음
        - 메시지를 전송층에서 수신 가능한 크기의 데이터 단편으로 나눔
        - 순서에 어긋나게 서버 프로세스에 도착
    - TCP
      - 연결 설정 --> 데이터 교환 --> 연결 해제
      - 순서에 맞게 도착
- 5계층 : 세션층
  - 데이터가 통신하기 위한 논리적인 연결
  - 전송 단위 : 메시지
  - 프로토콜 : SSH
- 6계층 : 표현층
  - 응용 프로세스의 독립성 제공
  - 암호화
  - 전송 단위 : 메시지
- 7계층 : 응용층
  - 응용 서비스 수행
  - 전송 단위 : 메시지
  - 프로토콜 : HTTP, DNS, SMTP, FTP, Telnet
    - DNS
      - Domain Name System
      - IP 줌

## 라우팅
- RIP
  - Routing Infromation Protocol
  - 각 네트워크를 동일하게 취급
  - Inter Domain
  - 자율 시스템 내에서 사용하는 내부 라우팅 프로토콜
  - 거리 백터 라우팅 기반
  - 홉 카운트 수만 따짐
  - UDP에 캡슐화
- OSPF
  - Open Shorting Path First
  - 요청된 서비스에 따라 비용을 관리자가 할당 가능
  - Inter Domain
  - 링크 상태 라우팅에 근거를 둔 내부 라우팅 프로토콜
  - 라우팅을 효율적으로 수행하기 위해 자율 시스템을 여러 지역으로 나눔
  - 딕스트라 알고리즘을 사용하여 라우팅 테이블 생성
- BGP
  - Border Gateway Protocol
  - 관리자가 정하는 정책에 따라 경로 설정
  - Outer Domain
  - 자율 시스템 간 라우팅 프로토콜
  - 경로 백터 라우팅 방법 사용
  - TCP에 캡슐화
  - 잘 알려진 179번 포트 사용

## IPS
- Intrusion Prevention System
- 사설 네트워크를 외부로부터 보호
- 미리 정의된 규칙 기반
- 특징
  - 접근 제어 목록(ACL)을 통해 보안 정책 설정
  - 가능한 투명성 보장 --> 지연 없음
- 기능
  - 접근 제어
  - 로깅, 감사 추적
  - 인증
  - 데이터 암호화
- 역할
  - 취약한 서비스로부터 보호
  - 집중된 보안
  - 비밀성 향상
- 한계
  - 바이러스 차단 불가
  - 내부 공격 차단 불가
  - 우회 공격에 대한 제어 불가
  - 새로운 형태의 공격 차단 불가

## 화이트리스트
- 기본적으로 차단
- 경우에 따라 허용

## 블랙리스트
- 기본적으로 허용
- 경우에 따라 차단

## NAT
- Network Address Translation
- 주소 변환
- 공인 주소의 효과
- 네트워크 구조를 노출시키지 않음
- 내부 --> 외부
  - 발신지 주소를 범용 NAT 주소로 변환
- 외부 --> 내부
  - 목적지 주소를 사설 주소로 변

## IDS
- Intrusion Detection System
- 네트워크에서 발생하는 비정상적인 행위를 실시간으로 탐지하여 대응
- 보안 정책에 따라 탐지 및 대응책 설정
- 특징
  - 내/외부망의 접속 지점에 위치
- 장점
  - 내부 사용자의 오남용 탐지 및 방어 가능
  - 해킹 사고 시 근원지 추적 가능
- 단점
  - 새로운 침입 기법에 대한 즉각적인 대응 곤란
  - 근본적인 해결책이 되지 못함

## VPN
- Virutal Private Network
- 특징
  - 인터넷을 통해 디바이스 간에 사설 네트워크 연결 설정
  - 공중망을 이용하여 사설망이 요구하는 서비스를 제공할 수 있도록 구축한 망
  - 공중망 내에서 전용선처럼 사용할 수 있도록 함
  - 보안성 우수
- 장점
  - 해당 ISP가 있는 곳이라면 어디서든 접속 가능
  - 다양한 구축 방법 : IPSec, MPLS 등
  - 네트워크의 유연성
- 단점
  - 표준의 부재
- 구성요소
  - 터널링
  - 암호화 및 인증
  - 접근 제어
- 프로토콜
  - 2계층 : PPTP, L2TP, L2F
  - 3계층 : IPSec
    - TCP/IP 프로토콜의 IP 계층에서 보안 서비스 제공
    - IP 계층 보안의 기능적 영역
      - 인증 : 무결성 보장(발신자가 실제 보낸 당사자임을 확인)
      - 기밀성 : 제 3자에 의한 도청 방지
      - 키 관리 : 안전한 키 관리
    - 프로토콜
      - 인증 프로토콜 : AH(Authentication Header)
        - 프라이버시(기밀성) 제공하지 않음
        - 해시 함수, 대칭 키 사용
        - 메시지 인증을 제공하는 확장 헤더
      - 암호 + 인증 프로토콜 : ESP(Encapsulating Security Protocol)
        - 발신지 인증, 무결성, 기밀성 제공
        - 헤더, 트레일러 추가
        - AH + 기밀성
  - 2/3계층 : MPLS

## 은닉채널
- 표면적 목적 외의 정보/은닉 메시지를 전송하기 위해 기본 통신 채널에 기생하는 통신 채널
- 은닉 메시지 : 송/수신자만 알 수 있도록 한 것

## 세션 하이재킹
- 세션이 연결되어 있는 상태를 가로채기 하는 공격
- 아이디/패스워드를 몰라도 시스템에 접근하여 자원/데이터 사용 가능
- TCP 세션 하이재킹
  - TCP 시퀀스 넘버를 제어하는데 문제가 있음을 알고 파고든 공격
  - 보안 대책
    - 암호화된 연결 사용
    - 비동기화된 상태 탐지 : 서버, 시퀀스 넘버 주기적으로 체크
    - 예상치 못한 접속의 리셋

## MITM 공격
- Man In The Middle Attack
- 패킷, MAC, IP 주소 + 데이터 내용까지 수정 시도
- 데이터 전송을 가로채는 공격

## DoS
- Denial of Service
- 공격 대상이 수용 가능한 능력 이상의 정보 제공
- 용량 초과 --> 정상적으로 작동하지 못하게 함
- 특징
  - 파괴 공격
  - 시스템 자원 고갈 공격
  - 네트워크 자원 고갈 공격

## DDoS
- Distributed Denial of Service
- 확실한 대책 없음
- 자동화된 툴 이용
- 응용 프로그램의 리소스 소진시킴
- 기본 구성
  - 공격자 : 공격을 주도하는 해커 컴퓨터
  - 마스터 : 공격자에게 직접 명령을 받는 시스템
  - 핸들러 프로그램 : 마스터 시스템 역할 수행
  - 에이전트 : 공격 대상에 직접 공격을 가하는 시스템
  - 데몬 프로그램 : 에이전트 시스템 역할 수행
- 공격 대응책
  - 방화벽 설치
  - IPS 설치
  - 시스템 패치
  - 스캐닝
  - 시스템 대역폭 제한

## Ping of Death
- ICMP 패킷을 정상보다 아주 작게 만듦
- 네트워크를 통해 라우팅되어 단편화됨
- 조각화된 패킷을 모두 처리해야 함 --> 부하 심해짐

## SYN Flooding 공격
- 서버별 한정되어 있는 접속 가능한 공간에 존재하지 않는 클라이언트가 접속한 것처럼 속임

## Bonk, Boink, Teardrop 공격
- 반복적인 요구 --> 시스템 자원 고갈 시킴
- 시스템 패킷 전송, 재조합에 과부하 걸리도록 시퀀스 넘버 속임

## Bonk 공격
- 모든 시퀀스 넘버를 1번으로 전송

## Boink 공격
- 중간부터 일정한 시퀀스 넘버 전송

## Teardrop 공격
- off 중복/공간을 두어 재조합이 안 되게 만드는 공격

## Land 공격
- 패킷 전송 시 출발지와 목적지 IP 주소를 동일하게 만듦

## Smurf 공격
- ICMP 패킷 이용
- 대상 서버를 폭주시키려고 시도
- 광범위한 효과로 DoS 중 피해가 가장 큼


